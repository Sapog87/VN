<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>VN</title>
</head>

<body>
  <script src="https://cdn.jsdelivr.net/gh/jerosoler/Drawflow/dist/drawflow.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jerosoler/Drawflow@0.0.48/dist/drawflow.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js"
    integrity="sha256-KzZiKy0DWYsnwMF+X1DvQngQ2/FxF7MF3Ff72XcpuPs=" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"
    integrity="sha256-h20CPZ0QyXlBuAw7A+KluUYx/3pK+c7lYEpqLTlxjYQ=" crossorigin="anonymous" />
  <link rel="stylesheet" type="text/css" href="beautiful.css" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
  <script src="https://unpkg.com/micromodal/dist/micromodal.min.js"></script>

  <header>
    <h2>VN</h2>
    <div class="github-link">
      <a href="https://github.com/jerosoler/Drawflow" target="_blank"><i class="fab fa-github fa-3x"></i></a>
    </div>
    <div class="them-edit-link">
      <a href="https://jerosoler.github.io/drawflow-theme-generator/" target="_blank">ðŸŽ¨</a>
    </div>
  </header>

  <div class="wrapper">
    <div class="col">
      <div class="drag-drawflow" draggable="true" ondragstart="drag(event)" data-node="variable">
        <span>Variable</span>
      </div>
      <div class="drag-drawflow" draggable="true" ondragstart="drag(event)" data-node="start">
        <span>Opening Scene</span>
      </div>
      <div class="drag-drawflow" draggable="true" ondragstart="drag(event)" data-node="end">
        <span>Final Scene</span>
      </div>
      <div class="drag-drawflow" draggable="true" ondragstart="drag(event)" data-node="intermediate">
        <span>Intermediate Scene</span>
      </div>
      <div class="drag-drawflow" draggable="true" ondragstart="drag(event)" data-node="button">
        <span>Button</span>
      </div>
      <div class="drag-drawflow" draggable="true" ondragstart="drag(event)" data-node="if-else">
        <span>If-Else</span>
      </div>
      <div class="drag-drawflow" draggable="true" ondragstart="drag(event)" data-node="action">
        <span>Action</span>
      </div>

    </div>

    <div class="col-right">
      <div class="menu">
        <ul>
          <li onclick="editor.changeModule('Home'); changeModule(event);" class="selected">
            Home
          </li>
        </ul>
      </div>
      <div id="drawflow" ondrop="drop(event)" ondragover="allowDrop(event)">
        <div class="btn-export" onclick="Swal.fire({ 
          title: 'Export',
          text: JSON.stringify(editor.export(), null,4)}
        )">
          Export
        </div>
        <div class="btn-clear" onclick="editor.clearModuleSelected()">
          Clear
        </div>
        <div class="bar-zoom">
          <i class="fas fa-search-minus" onclick="editor.zoom_out()"></i>
          <i class="fas fa-search" onclick="editor.zoom_reset()"></i>
          <i class="fas fa-search-plus" onclick="editor.zoom_in()"></i>
        </div>
      </div>
    </div>
  </div>

  <script>
    var id = document.getElementById("drawflow");
    const editor = new Drawflow(id);
    editor.reroute = true;
    editor.draggable_inputs = false;
    const dataToImport = { "drawflow": { "Home": { "data": { "6": { "id": 6, "name": "start", "data": { "text": "" }, "class": "start", "html": "\n <div>\n <div class=\"title-box\">Opening Scene</div>\n <div class=\"box\">\n <textarea placeholder=\"Scene text\" df-text></textarea>\n </div> \n </div>\n ", "typenode": false, "inputs": {}, "outputs": { "output_1": { "connections": [ { "node": "7", "output": "input_1" }, { "node": "8", "output": "input_1" }, { "node": "9", "output": "input_1" } ] } }, "pos_x": 181, "pos_y": 301 }, "7": { "id": 7, "name": "button", "data": { "text": "" }, "class": "button", "html": "\n <div>\n <div class=\"title-box\">Button</div>\n <div class=\"box\">\n <input type=\"text\" placeholder=\"Button text\" df-text>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "6", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "10", "output": "input_1" } ] } }, "pos_x": 501, "pos_y": 127 }, "8": { "id": 8, "name": "button", "data": { "text": "" }, "class": "button", "html": "\n <div>\n <div class=\"title-box\">Button</div>\n <div class=\"box\">\n <input type=\"text\" placeholder=\"Button text\" df-text>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "6", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "12", "output": "input_1" } ] } }, "pos_x": 502, "pos_y": 263 }, "9": { "id": 9, "name": "button", "data": { "text": "" }, "class": "button", "html": "\n <div>\n <div class=\"title-box\">Button</div>\n <div class=\"box\">\n <input type=\"text\" placeholder=\"Button text\" df-text>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "6", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "13", "output": "input_1" } ] } }, "pos_x": 501, "pos_y": 403 }, "10": { "id": 10, "name": "action", "data": { "action": "" }, "class": "action", "html": "\n <div>\n <div class=\"title-box\">Action</div>\n <div class=\"box\">\n <textarea type=\"text\" placeholder=\"e.g. a=a+1\" df-action>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "7", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "11", "output": "input_1" } ] } }, "pos_x": 752, "pos_y": 123 }, "11": { "id": 11, "name": "intermediate", "data": { "text": "" }, "class": "intermediate", "html": "\n <div>\n <div class=\"title-box\">Intermediate Scene</div>\n <div class=\"box\">\n <textarea placeholder=\"Scene text\" df-text></textarea>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "10", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "15", "output": "input_1" }, { "node": "17", "output": "input_1" } ] } }, "pos_x": 1091.5714285714287, "pos_y": -11 }, "12": { "id": 12, "name": "intermediate", "data": { "text": "" }, "class": "intermediate", "html": "\n <div>\n <div class=\"title-box\">Intermediate Scene</div>\n <div class=\"box\">\n <textarea placeholder=\"Scene text\" df-text></textarea>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "8", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "18", "output": "input_1" }, { "node": "19", "output": "input_1" } ] } }, "pos_x": 1098.5714285714287, "pos_y": 270 }, "13": { "id": 13, "name": "intermediate", "data": { "text": "" }, "class": "intermediate", "html": "\n <div>\n <div class=\"title-box\">Intermediate Scene</div>\n <div class=\"box\">\n <textarea placeholder=\"Scene text\" df-text></textarea>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "9", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "23", "output": "input_1" }, { "node": "24", "output": "input_1" } ] } }, "pos_x": 1088.6666666666667, "pos_y": 711.3333333333334 }, "15": { "id": 15, "name": "button", "data": { "text": "" }, "class": "button", "html": "\n <div>\n <div class=\"title-box\">Button</div>\n <div class=\"box\">\n <input type=\"text\" placeholder=\"Button text\" df-text>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "11", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "16", "output": "input_1" } ] } }, "pos_x": 1431.5714285714287, "pos_y": -154 }, "16": { "id": 16, "name": "ifelse", "data": { "condition": "" }, "class": "ifelse", "html": "\n <div>\n <div class=\"title-box\">If-Else</div>\n <div class=\"box\">\n <p>if</p>\n <textarea id=\"inputField\" type=\"text\" placeholder=\"a == b && t != 1\" df-condition></textarea>\n <p>else</p>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "15", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "29", "output": "input_1" } ] }, "output_2": { "connections": [ { "node": "21", "output": "input_1" } ] } }, "pos_x": 1818.111111111111, "pos_y": -290.1111111111111 }, "17": { "id": 17, "name": "button", "data": { "text": "" }, "class": "button", "html": "\n <div>\n <div class=\"title-box\">Button</div>\n <div class=\"box\">\n <input type=\"text\" placeholder=\"Button text\" df-text>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "11", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "30", "output": "input_1" } ] } }, "pos_x": 1434, "pos_y": -8.428571428571429 }, "18": { "id": 18, "name": "button", "data": { "text": "" }, "class": "button", "html": "\n <div>\n <div class=\"title-box\">Button</div>\n <div class=\"box\">\n <input type=\"text\" placeholder=\"Button text\" df-text>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "12", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "21", "output": "input_1" } ] } }, "pos_x": 1409, "pos_y": 220.42857142857142 }, "19": { "id": 19, "name": "button", "data": { "text": "" }, "class": "button", "html": "\n <div>\n <div class=\"title-box\">Button</div>\n <div class=\"box\">\n <input type=\"text\" placeholder=\"Button text\" df-text>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "12", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "30", "output": "input_1" } ] } }, "pos_x": 1407.5714285714287, "pos_y": 379 }, "21": { "id": 21, "name": "intermediate", "data": { "text": "" }, "class": "intermediate", "html": "\n <div>\n <div class=\"title-box\">Intermediate Scene</div>\n <div class=\"box\">\n <textarea placeholder=\"Scene text\" df-text></textarea>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "16", "input": "output_2" }, { "node": "18", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "31", "output": "input_1" }, { "node": "32", "output": "input_1" }, { "node": "33", "output": "input_1" } ] } }, "pos_x": 2206.6666666666665, "pos_y": 58 }, "23": { "id": 23, "name": "button", "data": { "text": "" }, "class": "button", "html": "\n <div>\n <div class=\"title-box\">Button</div>\n <div class=\"box\">\n <input type=\"text\" placeholder=\"Button text\" df-text>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "13", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "26", "output": "input_1" } ] } }, "pos_x": 1382, "pos_y": 575.3333333333334 }, "24": { "id": 24, "name": "button", "data": { "text": "" }, "class": "button", "html": "\n <div>\n <div class=\"title-box\">Button</div>\n <div class=\"box\">\n <input type=\"text\" placeholder=\"Button text\" df-text>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "13", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "25", "output": "input_1" } ] } }, "pos_x": 1387, "pos_y": 819 }, "25": { "id": 25, "name": "action", "data": { "action": "" }, "class": "action", "html": "\n <div>\n <div class=\"title-box\">Action</div>\n <div class=\"box\">\n <textarea type=\"text\" placeholder=\"e.g. a=a+1\" df-action>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "24", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "26", "output": "input_1" } ] } }, "pos_x": 1718.3333333333333, "pos_y": 817.6666666666666 }, "26": { "id": 26, "name": "intermediate", "data": { "text": "" }, "class": "intermediate", "html": "\n <div>\n <div class=\"title-box\">Intermediate Scene</div>\n <div class=\"box\">\n <textarea placeholder=\"Scene text\" df-text></textarea>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "25", "input": "output_1" }, { "node": "23", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "35", "output": "input_1" }, { "node": "36", "output": "input_1" } ] } }, "pos_x": 2199.3333333333335, "pos_y": 664 }, "29": { "id": 29, "name": "end", "data": { "text": "" }, "class": "end", "html": "\n <div>\n <div class=\"title-box\">Final Scene</div>\n <div class=\"box\">\n <textarea placeholder=\"Scene text\" df-text></textarea>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "16", "input": "output_1" } ] } }, "outputs": {}, "pos_x": 2247, "pos_y": -360.3333333333333 }, "30": { "id": 30, "name": "end", "data": { "text": "" }, "class": "end", "html": "\n <div>\n <div class=\"title-box\">Final Scene</div>\n <div class=\"box\">\n <textarea placeholder=\"Scene text\" df-text></textarea>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "17", "input": "output_1" }, { "node": "19", "input": "output_1" } ] } }, "outputs": {}, "pos_x": 2217.3333333333335, "pos_y": 345 }, "31": { "id": 31, "name": "button", "data": { "text": "" }, "class": "button", "html": "\n <div>\n <div class=\"title-box\">Button</div>\n <div class=\"box\">\n <input type=\"text\" placeholder=\"Button text\" df-text>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "21", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "38", "output": "input_1" } ] } }, "pos_x": 2576.6666666666665, "pos_y": -128 }, "32": { "id": 32, "name": "button", "data": { "text": "" }, "class": "button", "html": "\n <div>\n <div class=\"title-box\">Button</div>\n <div class=\"box\">\n <input type=\"text\" placeholder=\"Button text\" df-text>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "21", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "39", "output": "input_1" } ] } }, "pos_x": 2574, "pos_y": 15 }, "33": { "id": 33, "name": "button", "data": { "text": "" }, "class": "button", "html": "\n <div>\n <div class=\"title-box\">Button</div>\n <div class=\"box\">\n <input type=\"text\" placeholder=\"Button text\" df-text>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "21", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "40", "output": "input_1" } ] } }, "pos_x": 2576, "pos_y": 170 }, "34": { "id": 34, "name": "ifelse", "data": { "condition": "" }, "class": "ifelse", "html": "\n <div>\n <div class=\"title-box\">If-Else</div>\n <div class=\"box\">\n <p>if</p>\n <textarea id=\"inputField\" type=\"text\" placeholder=\"a == b && t != 1\" df-condition></textarea>\n <p>else</p>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "35", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "37", "output": "input_1" } ] }, "output_2": { "connections": [ { "node": "43", "output": "input_1" } ] } }, "pos_x": 2838.3333333333335, "pos_y": 486 }, "35": { "id": 35, "name": "button", "data": { "text": "" }, "class": "button", "html": "\n <div>\n <div class=\"title-box\">Button</div>\n <div class=\"box\">\n <input type=\"text\" placeholder=\"Button text\" df-text>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "26", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "34", "output": "input_1" } ] } }, "pos_x": 2519, "pos_y": 548.3333333333334 }, "36": { "id": 36, "name": "button", "data": { "text": "" }, "class": "button", "html": "\n <div>\n <div class=\"title-box\">Button</div>\n <div class=\"box\">\n <input type=\"text\" placeholder=\"Button text\" df-text>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "26", "input": "output_1" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "42", "output": "input_1" } ] } }, "pos_x": 2525.3333333333335, "pos_y": 782 }, "37": { "id": 37, "name": "end", "data": { "text": "" }, "class": "end", "html": "\n <div>\n <div class=\"title-box\">Final Scene</div>\n <div class=\"box\">\n <textarea placeholder=\"Scene text\" df-text></textarea>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "34", "input": "output_1" } ] } }, "outputs": {}, "pos_x": 3243, "pos_y": 434 }, "38": { "id": 38, "name": "end", "data": { "text": "" }, "class": "end", "html": "\n <div>\n <div class=\"title-box\">Final Scene</div>\n <div class=\"box\">\n <textarea placeholder=\"Scene text\" df-text></textarea>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "31", "input": "output_1" } ] } }, "outputs": {}, "pos_x": 2970, "pos_y": -131 }, "39": { "id": 39, "name": "end", "data": { "text": "" }, "class": "end", "html": "\n <div>\n <div class=\"title-box\">Final Scene</div>\n <div class=\"box\">\n <textarea placeholder=\"Scene text\" df-text></textarea>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "32", "input": "output_1" } ] } }, "outputs": {}, "pos_x": 2983, "pos_y": 40.666666666666664 }, "40": { "id": 40, "name": "end", "data": { "text": "" }, "class": "end", "html": "\n <div>\n <div class=\"title-box\">Final Scene</div>\n <div class=\"box\">\n <textarea placeholder=\"Scene text\" df-text></textarea>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "33", "input": "output_1" } ] } }, "outputs": {}, "pos_x": 2973.3333333333335, "pos_y": 190.66666666666666 }, "42": { "id": 42, "name": "end", "data": { "text": "" }, "class": "end", "html": "\n <div>\n <div class=\"title-box\">Final Scene</div>\n <div class=\"box\">\n <textarea placeholder=\"Scene text\" df-text></textarea>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "36", "input": "output_1" }, { "node": "43", "input": "output_2" } ] } }, "outputs": {}, "pos_x": 3383.6666666666665, "pos_y": 904 }, "43": { "id": 43, "name": "ifelse", "data": { "condition": "" }, "class": "ifelse", "html": "\n <div>\n <div class=\"title-box\">If-Else</div>\n <div class=\"box\">\n <p>if</p>\n <textarea id=\"inputField\" type=\"text\" placeholder=\"a == b && t != 1\" df-condition></textarea>\n <p>else</p>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "34", "input": "output_2" } ] } }, "outputs": { "output_1": { "connections": [ { "node": "44", "output": "input_1" } ] }, "output_2": { "connections": [ { "node": "42", "output": "input_1" } ] } }, "pos_x": 3079.3333333333335, "pos_y": 637.6666666666666 }, "44": { "id": 44, "name": "end", "data": { "text": "" }, "class": "end", "html": "\n <div>\n <div class=\"title-box\">Final Scene</div>\n <div class=\"box\">\n <textarea placeholder=\"Scene text\" df-text></textarea>\n </div> \n </div>\n ", "typenode": false, "inputs": { "input_1": { "connections": [ { "node": "43", "input": "output_1" } ] } }, "outputs": {}, "pos_x": 3498.6666666666665, "pos_y": 687 } } } } }
    editor.start();
    editor.import(dataToImport);

    // Events!
    editor.on("nodeCreated", function (id) {
      console.log("Node created " + id);
    });

    editor.on("nodeRemoved", function (id) {
      console.log("Node removed " + id);
    });

    editor.on("nodeSelected", function (id) {
      console.log("Node selected " + id);
    });

    editor.on("moduleCreated", function (name) {
      console.log("Module Created " + name);
    });

    editor.on("moduleChanged", function (name) {
      console.log("Module Changed " + name);
    });

    editor.on("connectionCreated", function (connection) {
      console.log("Connection created");
      console.log(connection);
    });

    editor.on("connectionRemoved", function (connection) {
      console.log("Connection removed");
      console.log(connection);
    });

    editor.on("mouseMove", function (position) {
      console.log("Position mouse x:" + position.x + " y:" + position.y);
    });

    editor.on("nodeMoved", function (id) {
      console.log("Node moved " + id);
    });

    editor.on("zoom", function (zoom) {
      console.log("Zoom level " + zoom);
    });

    editor.on("translate", function (position) {
      console.log("Translate x:" + position.x + " y:" + position.y);
    });

    editor.on("addReroute", function (id) {
      console.log("Reroute added " + id);
    });

    editor.on("removeReroute", function (id) {
      console.log("Reroute removed " + id);
    });

    /* DRAG EVENT */

    /* Mouse and Touch Actions */

    var elements = document.getElementsByClassName("drag-drawflow");
    for (var i = 0; i < elements.length; i++) {
      elements[i].addEventListener("touchend", drop, false);
      elements[i].addEventListener("touchstart", drag, false);
    }

    function allowDrop(ev) {
      ev.preventDefault();
    }

    function drag(ev) {
      ev.dataTransfer.setData("node", ev.target.getAttribute("data-node"));
    }

    function drop(ev) {
      ev.preventDefault();
      var data = ev.dataTransfer.getData("node");
      addNodeToDrawFlow(data, ev.clientX, ev.clientY);
    }

    function addNodeToDrawFlow(name, pos_x, pos_y) {
      pos_x =
        pos_x *
        (editor.precanvas.clientWidth /
          (editor.precanvas.clientWidth * editor.zoom)) -
        editor.precanvas.getBoundingClientRect().x *
        (editor.precanvas.clientWidth /
          (editor.precanvas.clientWidth * editor.zoom));
      pos_y =
        pos_y *
        (editor.precanvas.clientHeight /
          (editor.precanvas.clientHeight * editor.zoom)) -
        editor.precanvas.getBoundingClientRect().y *
        (editor.precanvas.clientHeight /
          (editor.precanvas.clientHeight * editor.zoom));

      // if-else outputs
      switch (name) {
        case "variable":
          var variable = `
            <div resize="both">
              <div class="title-box">Variable</div>
                <div class="box">
                  <p>Select variable type</p>
                  <select df-type>
                    <option value="string">String</option>
                    <option value="int">Integer</option>
                    <option value="double">Double</option>
                    <option value="bool">Boolean</option>
                  </select>
                  <p>Enter variable name</p>
                  <input type="text" df-name>
                  <p>Enter starting value</p>
                  <input type="text" df-value>
                </div>
              </div>
            </div>
            `;
          editor.addNode(
            "variable",
            0,
            0,
            pos_x,
            pos_y,
            "variable",
            { type: "string", name: "", value: "" },
            variable
          );
          break;

        case "start":
          var start = `
            <div>
              <div class="title-box">Opening Scene</div>
              <div class="box">
                <textarea placeholder="Scene text" df-text></textarea>
              </div>    
            </div>
            `;
          editor.addNode(
            "start",
            0,
            1,
            pos_x,
            pos_y,
            "start",
            { text: "" },
            start
          );
          break;

        case "end":
          var end = `
            <div>
              <div class="title-box">Final Scene</div>
              <div class="box">
                <textarea placeholder="Scene text" df-text></textarea>
              </div>    
            </div>
            `;
          editor.addNode(
            "end",
            1,
            0,
            pos_x,
            pos_y,
            "end",
            { text: "" },
            end
          );
          break;

        case "intermediate":
          var intermediate = `
            <div>
              <div class="title-box">Intermediate Scene</div>
              <div class="box">
                <textarea placeholder="Scene text" df-text></textarea>
              </div> 
            </div>
            `;
          editor.addNode(
            "intermediate",
            1,
            1,
            pos_x,
            pos_y,
            "intermediate",
            { text: "" },
            intermediate
          );
          break;

        case "button":
          var button = `
            <div>
              <div class="title-box">Button</div>
              <div class="box">
                <input type="text" placeholder="Button text" df-text>
              </div> 
            </div>
            `;
          editor.addNode(
            "button",
            1,
            1,
            pos_x,
            pos_y,
            "button",
            { text: "" },
            button
          );
          break;

        case "if-else":
          var ifelse = `
            <div>
              <div class="title-box">If-Else</div>
              <div class="box">
                <p>if</p>
                <textarea id="inputField" type="text" placeholder="a == b && t != 1" df-condition></textarea>
                <p>else</p>
              </div> 
            </div>
            `;
          editor.addNode(
            "ifelse",
            1,
            2,
            pos_x,
            pos_y,
            "ifelse",
            { condition: "" },
            ifelse
          );
          break;

        case "action":
          var action = `
            <div>
              <div class="title-box">Action</div>
              <div class="box">
                <textarea type="text" placeholder="e.g. a=a+1" df-action>
              </div> 
            </div>
            `;
          editor.addNode(
            "action",
            1,
            1,
            pos_x,
            pos_y,
            "action",
            { action: "" },
            action
          );
          break;

        default:
          break;
      }
    }

    var transform = "";
    var z = 1;
    function showpopup(e) {
      e.target.closest(".drawflow-node").style.zIndex = "9999";
      e.target.children[0].style.display = "block";
      //document.getElementById("modalfix").style.display = "block";

      //e.target.children[0].style.transform = 'translate('+translate.x+'px, '+translate.y+'px)';
      transform = editor.precanvas.style.transform;
      editor.precanvas.style.transform = "";
      editor.precanvas.style.left = editor.canvas_x + "px";
      editor.precanvas.style.top = editor.canvas_y + "px";
      console.log(transform);

      //e.target.children[0].style.top  =  -editor.canvas_y - editor.container.offsetTop +'px';
      //e.target.children[0].style.left  =  -editor.canvas_x  - editor.container.offsetLeft +'px';
      editor.editor_mode = "fixed";
    }

    function closemodal(e) {
      e.target.closest(".drawflow-node").style.zIndex = "2";
      e.target.parentElement.parentElement.style.display = "none";
      //document.getElementById("modalfix").style.display = "none";
      editor.precanvas.style.transform = transform;
      editor.precanvas.style.left = "0px";
      editor.precanvas.style.top = "0px";
      editor.editor_mode = "edit";
    }

    function changeModule(event) {
      var all = document.querySelectorAll(".menu ul li");
      for (var i = 0; i < all.length; i++) {
        all[i].classList.remove("selected");
      }
      event.target.classList.add("selected");
    }

    function writeToFile(data) {
      const fs = require('fs')

      fs.writeFile('output.txt', data, (err) => {
        if (err) throw err;
      });
    }
  </script>
</body>

</html>